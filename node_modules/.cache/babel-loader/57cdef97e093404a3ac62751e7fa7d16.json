{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar EnterLeaveCounter_1 = require(\"./EnterLeaveCounter\");\n\nvar BrowserDetector_1 = require(\"./BrowserDetector\");\n\nvar OffsetUtils_1 = require(\"./OffsetUtils\");\n\nvar NativeDragSources_1 = require(\"./NativeDragSources\");\n\nvar NativeTypes = require(\"./NativeTypes\");\n\nvar defaults = require('lodash/defaults');\n\nvar HTML5Backend =\n/** @class */\nfunction () {\n  function HTML5Backend(manager) {\n    var _this = this;\n\n    this.sourcePreviewNodes = new Map();\n    this.sourcePreviewNodeOptions = new Map();\n    this.sourceNodes = new Map();\n    this.sourceNodeOptions = new Map();\n    this.dragStartSourceIds = null;\n    this.dropTargetIds = [];\n    this.dragEnterTargetIds = [];\n    this.currentNativeSource = null;\n    this.currentNativeHandle = null;\n    this.currentDragSourceNode = null;\n    this.altKeyPressed = false;\n    this.mouseMoveTimeoutTimer = null;\n    this.asyncEndDragFrameId = null;\n    this.dragOverTargetIds = null;\n\n    this.getSourceClientOffset = function (sourceId) {\n      return OffsetUtils_1.getNodeClientOffset(_this.sourceNodes.get(sourceId));\n    };\n\n    this.endDragNativeItem = function () {\n      if (!_this.isDraggingNativeItem()) {\n        return;\n      }\n\n      _this.actions.endDrag();\n\n      _this.registry.removeSource(_this.currentNativeHandle);\n\n      _this.currentNativeHandle = null;\n      _this.currentNativeSource = null;\n    };\n\n    this.isNodeInDocument = function (node) {\n      // Check the node either in the main document or in the current context\n      return !!document && document.body.contains(node) || !!_this.window && _this.window.document.body.contains(node);\n    };\n\n    this.endDragIfSourceWasRemovedFromDOM = function () {\n      var node = _this.currentDragSourceNode;\n\n      if (_this.isNodeInDocument(node)) {\n        return;\n      }\n\n      if (_this.clearCurrentDragSourceNode()) {\n        _this.actions.endDrag();\n      }\n    };\n\n    this.handleTopDragStartCapture = function () {\n      _this.clearCurrentDragSourceNode();\n\n      _this.dragStartSourceIds = [];\n    };\n\n    this.handleTopDragStart = function (e) {\n      var dragStartSourceIds = _this.dragStartSourceIds;\n      _this.dragStartSourceIds = null;\n      var clientOffset = OffsetUtils_1.getEventClientOffset(e); // Avoid crashing if we missed a drop event or our previous drag died\n\n      if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      } // Don't publish the source just yet (see why below)\n\n\n      _this.actions.beginDrag(dragStartSourceIds || [], {\n        publishSource: false,\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = NativeDragSources_1.matchNativeItemType(dataTransfer);\n\n      if (_this.monitor.isDragging()) {\n        if (typeof dataTransfer.setDragImage === 'function') {\n          // Use custom drag image if user specifies it.\n          // If child drag source refuses drag but parent agrees,\n          // use parent's node as drag image. Neither works in IE though.\n          var sourceId = _this.monitor.getSourceId();\n\n          var sourceNode = _this.sourceNodes.get(sourceId);\n\n          var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n\n          var _a = _this.getCurrentSourcePreviewNodeOptions(),\n              anchorX = _a.anchorX,\n              anchorY = _a.anchorY,\n              offsetX = _a.offsetX,\n              offsetY = _a.offsetY;\n\n          var anchorPoint = {\n            anchorX: anchorX,\n            anchorY: anchorY\n          };\n          var offsetPoint = {\n            offsetX: offsetX,\n            offsetY: offsetY\n          };\n          var dragPreviewOffset = OffsetUtils_1.getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n          dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n        }\n\n        try {\n          // Firefox won't drag without setting data\n          dataTransfer.setData('application/json', {});\n        } catch (err) {// IE doesn't support MIME types in setData\n        } // Store drag source node so we can check whether\n        // it is removed from DOM and trigger endDrag manually.\n\n\n        _this.setCurrentDragSourceNode(e.target); // Now we are ready to publish the drag source.. or are we not?\n\n\n        var captureDraggingState = _this.getCurrentSourcePreviewNodeOptions().captureDraggingState;\n\n        if (!captureDraggingState) {\n          // Usually we want to publish it in the next tick so that browser\n          // is able to screenshot the current (not yet dragging) state.\n          //\n          // It also neatly avoids a situation where render() returns null\n          // in the same tick for the source element, and browser freaks out.\n          setTimeout(function () {\n            return _this.actions.publishDragSource();\n          }, 0);\n        } else {\n          // In some cases the user may want to override this behavior, e.g.\n          // to work around IE not supporting custom drag previews.\n          //\n          // When using a custom drag layer, the only way to prevent\n          // the default drag preview from drawing in IE is to screenshot\n          // the dragging state in which the node itself has zero opacity\n          // and height. In this case, though, returning null from render()\n          // will abruptly end the dragging, which is not obvious.\n          //\n          // This is the reason such behavior is strictly opt-in.\n          _this.actions.publishDragSource();\n        }\n      } else if (nativeType) {\n        // A native item (such as URL) dragged from inside the document\n        _this.beginDragNativeItem(nativeType);\n      } else if (!dataTransfer.types && (!e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n        // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n        // Just let it drag. It's a native type (URL or text) and will be picked up in\n        // dragenter handler.\n        return;\n      } else {\n        // If by this time no drag source reacted, tell browser not to drag.\n        e.preventDefault();\n      }\n    };\n\n    this.handleTopDragEndCapture = function () {\n      if (_this.clearCurrentDragSourceNode()) {\n        // Firefox can dispatch this event in an infinite loop\n        // if dragend handler does something like showing an alert.\n        // Only proceed if we have not handled it already.\n        _this.actions.endDrag();\n      }\n    };\n\n    this.handleTopDragEnterCapture = function (e) {\n      _this.dragEnterTargetIds = [];\n\n      var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n\n      if (!isFirstEnter || _this.monitor.isDragging()) {\n        return;\n      }\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = NativeDragSources_1.matchNativeItemType(dataTransfer);\n\n      if (nativeType) {\n        // A native item (such as file or URL) dragged from outside the document\n        _this.beginDragNativeItem(nativeType);\n      }\n    };\n\n    this.handleTopDragEnter = function (e) {\n      var dragEnterTargetIds = _this.dragEnterTargetIds;\n      _this.dragEnterTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n\n      if (!BrowserDetector_1.isFirefox()) {\n        // Don't emit hover in `dragenter` on Firefox due to an edge case.\n        // If the target changes position as the result of `dragenter`, Firefox\n        // will still happily dispatch `dragover` despite target being no longer\n        // there. The easy solution is to only fire `hover` in `dragover` on FF.\n        _this.actions.hover(dragEnterTargetIds, {\n          clientOffset: OffsetUtils_1.getEventClientOffset(e)\n        });\n      }\n\n      var canDrop = dragEnterTargetIds.some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // IE requires this to fire dragover events\n        e.preventDefault();\n        e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n      }\n    };\n\n    this.handleTopDragOverCapture = function () {\n      _this.dragOverTargetIds = [];\n    };\n\n    this.handleTopDragOver = function (e) {\n      var dragOverTargetIds = _this.dragOverTargetIds;\n      _this.dragOverTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        // Prevent default \"drop and blow away the whole document\" action.\n        e.preventDefault();\n        e.dataTransfer.dropEffect = 'none';\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n\n      _this.actions.hover(dragOverTargetIds || [], {\n        clientOffset: OffsetUtils_1.getEventClientOffset(e)\n      });\n\n      var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // Show user-specified drop effect.\n        e.preventDefault();\n        e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n      } else if (_this.isDraggingNativeItem()) {\n        // Don't show a nice cursor but still prevent default\n        // \"drop and blow away the whole document\" action.\n        e.preventDefault();\n        e.dataTransfer.dropEffect = 'none';\n      } else {\n        e.preventDefault();\n        e.dataTransfer.dropEffect = 'none';\n      }\n    };\n\n    this.handleTopDragLeaveCapture = function (e) {\n      if (_this.isDraggingNativeItem()) {\n        e.preventDefault();\n      }\n\n      var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n\n      if (!isLastLeave) {\n        return;\n      }\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      }\n    };\n\n    this.handleTopDropCapture = function (e) {\n      _this.dropTargetIds = [];\n      e.preventDefault();\n\n      if (_this.isDraggingNativeItem()) {\n        _this.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer);\n      }\n\n      _this.enterLeaveCounter.reset();\n    };\n\n    this.handleTopDrop = function (e) {\n      var dropTargetIds = _this.dropTargetIds;\n      _this.dropTargetIds = [];\n\n      _this.actions.hover(dropTargetIds, {\n        clientOffset: OffsetUtils_1.getEventClientOffset(e)\n      });\n\n      _this.actions.drop({\n        dropEffect: _this.getCurrentDropEffect()\n      });\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      } else {\n        _this.endDragIfSourceWasRemovedFromDOM();\n      }\n    };\n\n    this.handleSelectStart = function (e) {\n      var target = e.target; // Only IE requires us to explicitly say\n      // we want drag drop operation to start\n\n      if (typeof target.dragDrop !== 'function') {\n        return;\n      } // Inputs and textareas should be selectable\n\n\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n        return;\n      } // For other targets, ask IE\n      // to enable drag and drop\n\n\n      e.preventDefault();\n      target.dragDrop();\n    };\n\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n    this.context = manager.getContext();\n    this.enterLeaveCounter = new EnterLeaveCounter_1.default(this.isNodeInDocument);\n  }\n\n  Object.defineProperty(HTML5Backend.prototype, \"window\", {\n    // public for test\n    get: function get() {\n      if (this.context && this.context.window) {\n        return this.context.window;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  HTML5Backend.prototype.setup = function () {\n    if (this.window === undefined) {\n      return;\n    }\n\n    if (this.window.__isReactDndBackendSetUp) {\n      throw new Error('Cannot have two HTML5 backends at the same time.');\n    }\n\n    this.window.__isReactDndBackendSetUp = true;\n    this.addEventListeners(this.window);\n  };\n\n  HTML5Backend.prototype.teardown = function () {\n    if (this.window === undefined) {\n      return;\n    }\n\n    this.window.__isReactDndBackendSetUp = false;\n    this.removeEventListeners(this.window);\n    this.clearCurrentDragSourceNode();\n\n    if (this.asyncEndDragFrameId) {\n      this.window.cancelAnimationFrame(this.asyncEndDragFrameId);\n    }\n  };\n\n  HTML5Backend.prototype.connectDragPreview = function (sourceId, node, options) {\n    var _this = this;\n\n    this.sourcePreviewNodeOptions.set(sourceId, options);\n    this.sourcePreviewNodes.set(sourceId, node);\n    return function () {\n      _this.sourcePreviewNodes.delete(sourceId);\n\n      _this.sourcePreviewNodeOptions.delete(sourceId);\n    };\n  };\n\n  HTML5Backend.prototype.connectDragSource = function (sourceId, node, options) {\n    var _this = this;\n\n    this.sourceNodes.set(sourceId, node);\n    this.sourceNodeOptions.set(sourceId, options);\n\n    var handleDragStart = function handleDragStart(e) {\n      return _this.handleDragStart(e, sourceId);\n    };\n\n    var handleSelectStart = function handleSelectStart(e) {\n      return _this.handleSelectStart(e);\n    };\n\n    node.setAttribute('draggable', true);\n    node.addEventListener('dragstart', handleDragStart);\n    node.addEventListener('selectstart', handleSelectStart);\n    return function () {\n      _this.sourceNodes.delete(sourceId);\n\n      _this.sourceNodeOptions.delete(sourceId);\n\n      node.removeEventListener('dragstart', handleDragStart);\n      node.removeEventListener('selectstart', handleSelectStart);\n      node.setAttribute('draggable', false);\n    };\n  };\n\n  HTML5Backend.prototype.connectDropTarget = function (targetId, node) {\n    var _this = this;\n\n    var handleDragEnter = function handleDragEnter(e) {\n      return _this.handleDragEnter(e, targetId);\n    };\n\n    var handleDragOver = function handleDragOver(e) {\n      return _this.handleDragOver(e, targetId);\n    };\n\n    var handleDrop = function handleDrop(e) {\n      return _this.handleDrop(e, targetId);\n    };\n\n    node.addEventListener('dragenter', handleDragEnter);\n    node.addEventListener('dragover', handleDragOver);\n    node.addEventListener('drop', handleDrop);\n    return function () {\n      node.removeEventListener('dragenter', handleDragEnter);\n      node.removeEventListener('dragover', handleDragOver);\n      node.removeEventListener('drop', handleDrop);\n    };\n  };\n\n  HTML5Backend.prototype.addEventListeners = function (target) {\n    // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n    if (!target.addEventListener) {\n      return;\n    }\n\n    target.addEventListener('dragstart', this.handleTopDragStart);\n    target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n    target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n    target.addEventListener('dragenter', this.handleTopDragEnter);\n    target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n    target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n    target.addEventListener('dragover', this.handleTopDragOver);\n    target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n    target.addEventListener('drop', this.handleTopDrop);\n    target.addEventListener('drop', this.handleTopDropCapture, true);\n  };\n\n  HTML5Backend.prototype.removeEventListeners = function (target) {\n    // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n    if (!target.removeEventListener) {\n      return;\n    }\n\n    target.removeEventListener('dragstart', this.handleTopDragStart);\n    target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n    target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n    target.removeEventListener('dragenter', this.handleTopDragEnter);\n    target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n    target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n    target.removeEventListener('dragover', this.handleTopDragOver);\n    target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n    target.removeEventListener('drop', this.handleTopDrop);\n    target.removeEventListener('drop', this.handleTopDropCapture, true);\n  };\n\n  HTML5Backend.prototype.getCurrentSourceNodeOptions = function () {\n    var sourceId = this.monitor.getSourceId();\n    var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n    return defaults(sourceNodeOptions || {}, {\n      dropEffect: this.altKeyPressed ? 'copy' : 'move'\n    });\n  };\n\n  HTML5Backend.prototype.getCurrentDropEffect = function () {\n    if (this.isDraggingNativeItem()) {\n      // It makes more sense to default to 'copy' for native resources\n      return 'copy';\n    }\n\n    return this.getCurrentSourceNodeOptions().dropEffect;\n  };\n\n  HTML5Backend.prototype.getCurrentSourcePreviewNodeOptions = function () {\n    var sourceId = this.monitor.getSourceId();\n    var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n    return defaults(sourcePreviewNodeOptions || {}, {\n      anchorX: 0.5,\n      anchorY: 0.5,\n      captureDraggingState: false\n    });\n  };\n\n  HTML5Backend.prototype.isDraggingNativeItem = function () {\n    var itemType = this.monitor.getItemType();\n    return Object.keys(NativeTypes).some(function (key) {\n      return NativeTypes[key] === itemType;\n    });\n  };\n\n  HTML5Backend.prototype.beginDragNativeItem = function (type) {\n    this.clearCurrentDragSourceNode();\n    var SourceType = NativeDragSources_1.createNativeDragSource(type);\n    this.currentNativeSource = new SourceType();\n    this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n    this.actions.beginDrag([this.currentNativeHandle]);\n  };\n\n  HTML5Backend.prototype.setCurrentDragSourceNode = function (node) {\n    var _this = this;\n\n    this.clearCurrentDragSourceNode();\n    this.currentDragSourceNode = node; // A timeout of > 0 is necessary to resolve Firefox issue referenced\n    // See:\n    //   * https://github.com/react-dnd/react-dnd/pull/928\n    //   * https://github.com/react-dnd/react-dnd/issues/869\n\n    var MOUSE_MOVE_TIMEOUT = 1000; // Receiving a mouse event in the middle of a dragging operation\n    // means it has ended and the drag source node disappeared from DOM,\n    // so the browser didn't dispatch the dragend event.\n    //\n    // We need to wait before we start listening for mousemove events.\n    // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n    // immediately in some browsers.\n    //\n    // See:\n    //   * https://github.com/react-dnd/react-dnd/pull/928\n    //   * https://github.com/react-dnd/react-dnd/issues/869\n    //\n\n    this.mouseMoveTimeoutTimer = setTimeout(function () {\n      return _this.window && _this.window.addEventListener('mousemove', _this.endDragIfSourceWasRemovedFromDOM, true);\n    }, MOUSE_MOVE_TIMEOUT);\n  };\n\n  HTML5Backend.prototype.clearCurrentDragSourceNode = function () {\n    if (this.currentDragSourceNode) {\n      this.currentDragSourceNode = null;\n\n      if (this.window) {\n        this.window.clearTimeout(this.mouseMoveTimeoutTimer);\n        this.window.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n      }\n\n      this.mouseMoveTimeoutTimer = null;\n      return true;\n    }\n\n    return false;\n  };\n\n  HTML5Backend.prototype.handleDragStart = function (e, sourceId) {\n    if (!this.dragStartSourceIds) {\n      this.dragStartSourceIds = [];\n    }\n\n    this.dragStartSourceIds.unshift(sourceId);\n  };\n\n  HTML5Backend.prototype.handleDragEnter = function (e, targetId) {\n    this.dragEnterTargetIds.unshift(targetId);\n  };\n\n  HTML5Backend.prototype.handleDragOver = function (e, targetId) {\n    if (this.dragOverTargetIds === null) {\n      this.dragOverTargetIds = [];\n    }\n\n    this.dragOverTargetIds.unshift(targetId);\n  };\n\n  HTML5Backend.prototype.handleDrop = function (e, targetId) {\n    this.dropTargetIds.unshift(targetId);\n  };\n\n  return HTML5Backend;\n}();\n\nexports.default = HTML5Backend;","map":{"version":3,"names":["Object","defineProperty","exports","value","EnterLeaveCounter_1","require","BrowserDetector_1","OffsetUtils_1","NativeDragSources_1","NativeTypes","defaults","HTML5Backend","manager","_this","sourcePreviewNodes","Map","sourcePreviewNodeOptions","sourceNodes","sourceNodeOptions","dragStartSourceIds","dropTargetIds","dragEnterTargetIds","currentNativeSource","currentNativeHandle","currentDragSourceNode","altKeyPressed","mouseMoveTimeoutTimer","asyncEndDragFrameId","dragOverTargetIds","getSourceClientOffset","sourceId","getNodeClientOffset","get","endDragNativeItem","isDraggingNativeItem","actions","endDrag","registry","removeSource","isNodeInDocument","node","document","body","contains","window","endDragIfSourceWasRemovedFromDOM","clearCurrentDragSourceNode","handleTopDragStartCapture","handleTopDragStart","e","clientOffset","getEventClientOffset","monitor","isDragging","beginDrag","publishSource","dataTransfer","nativeType","matchNativeItemType","setDragImage","getSourceId","sourceNode","dragPreview","_a","getCurrentSourcePreviewNodeOptions","anchorX","anchorY","offsetX","offsetY","anchorPoint","offsetPoint","dragPreviewOffset","getDragPreviewOffset","x","y","setData","err","setCurrentDragSourceNode","target","captureDraggingState","setTimeout","publishDragSource","beginDragNativeItem","types","hasAttribute","preventDefault","handleTopDragEndCapture","handleTopDragEnterCapture","isFirstEnter","enterLeaveCounter","enter","handleTopDragEnter","altKey","isFirefox","hover","canDrop","some","targetId","canDropOnTarget","dropEffect","getCurrentDropEffect","handleTopDragOverCapture","handleTopDragOver","handleTopDragLeaveCapture","isLastLeave","leave","handleTopDropCapture","mutateItemByReadingDataTransfer","reset","handleTopDrop","drop","handleSelectStart","dragDrop","tagName","isContentEditable","getActions","getMonitor","getRegistry","context","getContext","default","prototype","undefined","enumerable","configurable","setup","__isReactDndBackendSetUp","Error","addEventListeners","teardown","removeEventListeners","cancelAnimationFrame","connectDragPreview","options","set","delete","connectDragSource","handleDragStart","setAttribute","addEventListener","removeEventListener","connectDropTarget","handleDragEnter","handleDragOver","handleDrop","getCurrentSourceNodeOptions","itemType","getItemType","keys","key","type","SourceType","createNativeDragSource","addSource","MOUSE_MOVE_TIMEOUT","clearTimeout","unshift"],"sources":["C:/Users/rytways/Downloads/simple-kanban-board/node_modules/react-dnd-html5-backend/lib/HTML5Backend.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EnterLeaveCounter_1 = require(\"./EnterLeaveCounter\");\nvar BrowserDetector_1 = require(\"./BrowserDetector\");\nvar OffsetUtils_1 = require(\"./OffsetUtils\");\nvar NativeDragSources_1 = require(\"./NativeDragSources\");\nvar NativeTypes = require(\"./NativeTypes\");\nvar defaults = require('lodash/defaults');\nvar HTML5Backend = /** @class */ (function () {\n    function HTML5Backend(manager) {\n        var _this = this;\n        this.sourcePreviewNodes = new Map();\n        this.sourcePreviewNodeOptions = new Map();\n        this.sourceNodes = new Map();\n        this.sourceNodeOptions = new Map();\n        this.dragStartSourceIds = null;\n        this.dropTargetIds = [];\n        this.dragEnterTargetIds = [];\n        this.currentNativeSource = null;\n        this.currentNativeHandle = null;\n        this.currentDragSourceNode = null;\n        this.altKeyPressed = false;\n        this.mouseMoveTimeoutTimer = null;\n        this.asyncEndDragFrameId = null;\n        this.dragOverTargetIds = null;\n        this.getSourceClientOffset = function (sourceId) {\n            return OffsetUtils_1.getNodeClientOffset(_this.sourceNodes.get(sourceId));\n        };\n        this.endDragNativeItem = function () {\n            if (!_this.isDraggingNativeItem()) {\n                return;\n            }\n            _this.actions.endDrag();\n            _this.registry.removeSource(_this.currentNativeHandle);\n            _this.currentNativeHandle = null;\n            _this.currentNativeSource = null;\n        };\n        this.isNodeInDocument = function (node) {\n            // Check the node either in the main document or in the current context\n            return ((!!document && document.body.contains(node)) ||\n                (!!_this.window && _this.window.document.body.contains(node)));\n        };\n        this.endDragIfSourceWasRemovedFromDOM = function () {\n            var node = _this.currentDragSourceNode;\n            if (_this.isNodeInDocument(node)) {\n                return;\n            }\n            if (_this.clearCurrentDragSourceNode()) {\n                _this.actions.endDrag();\n            }\n        };\n        this.handleTopDragStartCapture = function () {\n            _this.clearCurrentDragSourceNode();\n            _this.dragStartSourceIds = [];\n        };\n        this.handleTopDragStart = function (e) {\n            var dragStartSourceIds = _this.dragStartSourceIds;\n            _this.dragStartSourceIds = null;\n            var clientOffset = OffsetUtils_1.getEventClientOffset(e);\n            // Avoid crashing if we missed a drop event or our previous drag died\n            if (_this.monitor.isDragging()) {\n                _this.actions.endDrag();\n            }\n            // Don't publish the source just yet (see why below)\n            _this.actions.beginDrag(dragStartSourceIds || [], {\n                publishSource: false,\n                getSourceClientOffset: _this.getSourceClientOffset,\n                clientOffset: clientOffset,\n            });\n            var dataTransfer = e.dataTransfer;\n            var nativeType = NativeDragSources_1.matchNativeItemType(dataTransfer);\n            if (_this.monitor.isDragging()) {\n                if (typeof dataTransfer.setDragImage === 'function') {\n                    // Use custom drag image if user specifies it.\n                    // If child drag source refuses drag but parent agrees,\n                    // use parent's node as drag image. Neither works in IE though.\n                    var sourceId = _this.monitor.getSourceId();\n                    var sourceNode = _this.sourceNodes.get(sourceId);\n                    var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n                    var _a = _this.getCurrentSourcePreviewNodeOptions(), anchorX = _a.anchorX, anchorY = _a.anchorY, offsetX = _a.offsetX, offsetY = _a.offsetY;\n                    var anchorPoint = { anchorX: anchorX, anchorY: anchorY };\n                    var offsetPoint = { offsetX: offsetX, offsetY: offsetY };\n                    var dragPreviewOffset = OffsetUtils_1.getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n                    dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n                }\n                try {\n                    // Firefox won't drag without setting data\n                    dataTransfer.setData('application/json', {});\n                }\n                catch (err) {\n                    // IE doesn't support MIME types in setData\n                }\n                // Store drag source node so we can check whether\n                // it is removed from DOM and trigger endDrag manually.\n                _this.setCurrentDragSourceNode(e.target);\n                // Now we are ready to publish the drag source.. or are we not?\n                var captureDraggingState = _this.getCurrentSourcePreviewNodeOptions().captureDraggingState;\n                if (!captureDraggingState) {\n                    // Usually we want to publish it in the next tick so that browser\n                    // is able to screenshot the current (not yet dragging) state.\n                    //\n                    // It also neatly avoids a situation where render() returns null\n                    // in the same tick for the source element, and browser freaks out.\n                    setTimeout(function () { return _this.actions.publishDragSource(); }, 0);\n                }\n                else {\n                    // In some cases the user may want to override this behavior, e.g.\n                    // to work around IE not supporting custom drag previews.\n                    //\n                    // When using a custom drag layer, the only way to prevent\n                    // the default drag preview from drawing in IE is to screenshot\n                    // the dragging state in which the node itself has zero opacity\n                    // and height. In this case, though, returning null from render()\n                    // will abruptly end the dragging, which is not obvious.\n                    //\n                    // This is the reason such behavior is strictly opt-in.\n                    _this.actions.publishDragSource();\n                }\n            }\n            else if (nativeType) {\n                // A native item (such as URL) dragged from inside the document\n                _this.beginDragNativeItem(nativeType);\n            }\n            else if (!dataTransfer.types &&\n                (!e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n                // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n                // Just let it drag. It's a native type (URL or text) and will be picked up in\n                // dragenter handler.\n                return;\n            }\n            else {\n                // If by this time no drag source reacted, tell browser not to drag.\n                e.preventDefault();\n            }\n        };\n        this.handleTopDragEndCapture = function () {\n            if (_this.clearCurrentDragSourceNode()) {\n                // Firefox can dispatch this event in an infinite loop\n                // if dragend handler does something like showing an alert.\n                // Only proceed if we have not handled it already.\n                _this.actions.endDrag();\n            }\n        };\n        this.handleTopDragEnterCapture = function (e) {\n            _this.dragEnterTargetIds = [];\n            var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n            if (!isFirstEnter || _this.monitor.isDragging()) {\n                return;\n            }\n            var dataTransfer = e.dataTransfer;\n            var nativeType = NativeDragSources_1.matchNativeItemType(dataTransfer);\n            if (nativeType) {\n                // A native item (such as file or URL) dragged from outside the document\n                _this.beginDragNativeItem(nativeType);\n            }\n        };\n        this.handleTopDragEnter = function (e) {\n            var dragEnterTargetIds = _this.dragEnterTargetIds;\n            _this.dragEnterTargetIds = [];\n            if (!_this.monitor.isDragging()) {\n                // This is probably a native item type we don't understand.\n                return;\n            }\n            _this.altKeyPressed = e.altKey;\n            if (!BrowserDetector_1.isFirefox()) {\n                // Don't emit hover in `dragenter` on Firefox due to an edge case.\n                // If the target changes position as the result of `dragenter`, Firefox\n                // will still happily dispatch `dragover` despite target being no longer\n                // there. The easy solution is to only fire `hover` in `dragover` on FF.\n                _this.actions.hover(dragEnterTargetIds, {\n                    clientOffset: OffsetUtils_1.getEventClientOffset(e),\n                });\n            }\n            var canDrop = dragEnterTargetIds.some(function (targetId) {\n                return _this.monitor.canDropOnTarget(targetId);\n            });\n            if (canDrop) {\n                // IE requires this to fire dragover events\n                e.preventDefault();\n                e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n            }\n        };\n        this.handleTopDragOverCapture = function () {\n            _this.dragOverTargetIds = [];\n        };\n        this.handleTopDragOver = function (e) {\n            var dragOverTargetIds = _this.dragOverTargetIds;\n            _this.dragOverTargetIds = [];\n            if (!_this.monitor.isDragging()) {\n                // This is probably a native item type we don't understand.\n                // Prevent default \"drop and blow away the whole document\" action.\n                e.preventDefault();\n                e.dataTransfer.dropEffect = 'none';\n                return;\n            }\n            _this.altKeyPressed = e.altKey;\n            _this.actions.hover(dragOverTargetIds || [], {\n                clientOffset: OffsetUtils_1.getEventClientOffset(e),\n            });\n            var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n                return _this.monitor.canDropOnTarget(targetId);\n            });\n            if (canDrop) {\n                // Show user-specified drop effect.\n                e.preventDefault();\n                e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n            }\n            else if (_this.isDraggingNativeItem()) {\n                // Don't show a nice cursor but still prevent default\n                // \"drop and blow away the whole document\" action.\n                e.preventDefault();\n                e.dataTransfer.dropEffect = 'none';\n            }\n            else {\n                e.preventDefault();\n                e.dataTransfer.dropEffect = 'none';\n            }\n        };\n        this.handleTopDragLeaveCapture = function (e) {\n            if (_this.isDraggingNativeItem()) {\n                e.preventDefault();\n            }\n            var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n            if (!isLastLeave) {\n                return;\n            }\n            if (_this.isDraggingNativeItem()) {\n                _this.endDragNativeItem();\n            }\n        };\n        this.handleTopDropCapture = function (e) {\n            _this.dropTargetIds = [];\n            e.preventDefault();\n            if (_this.isDraggingNativeItem()) {\n                _this.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer);\n            }\n            _this.enterLeaveCounter.reset();\n        };\n        this.handleTopDrop = function (e) {\n            var dropTargetIds = _this.dropTargetIds;\n            _this.dropTargetIds = [];\n            _this.actions.hover(dropTargetIds, {\n                clientOffset: OffsetUtils_1.getEventClientOffset(e),\n            });\n            _this.actions.drop({ dropEffect: _this.getCurrentDropEffect() });\n            if (_this.isDraggingNativeItem()) {\n                _this.endDragNativeItem();\n            }\n            else {\n                _this.endDragIfSourceWasRemovedFromDOM();\n            }\n        };\n        this.handleSelectStart = function (e) {\n            var target = e.target;\n            // Only IE requires us to explicitly say\n            // we want drag drop operation to start\n            if (typeof target.dragDrop !== 'function') {\n                return;\n            }\n            // Inputs and textareas should be selectable\n            if (target.tagName === 'INPUT' ||\n                target.tagName === 'SELECT' ||\n                target.tagName === 'TEXTAREA' ||\n                target.isContentEditable) {\n                return;\n            }\n            // For other targets, ask IE\n            // to enable drag and drop\n            e.preventDefault();\n            target.dragDrop();\n        };\n        this.actions = manager.getActions();\n        this.monitor = manager.getMonitor();\n        this.registry = manager.getRegistry();\n        this.context = manager.getContext();\n        this.enterLeaveCounter = new EnterLeaveCounter_1.default(this.isNodeInDocument);\n    }\n    Object.defineProperty(HTML5Backend.prototype, \"window\", {\n        // public for test\n        get: function () {\n            if (this.context && this.context.window) {\n                return this.context.window;\n            }\n            else if (typeof window !== 'undefined') {\n                return window;\n            }\n            return undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HTML5Backend.prototype.setup = function () {\n        if (this.window === undefined) {\n            return;\n        }\n        if (this.window.__isReactDndBackendSetUp) {\n            throw new Error('Cannot have two HTML5 backends at the same time.');\n        }\n        this.window.__isReactDndBackendSetUp = true;\n        this.addEventListeners(this.window);\n    };\n    HTML5Backend.prototype.teardown = function () {\n        if (this.window === undefined) {\n            return;\n        }\n        this.window.__isReactDndBackendSetUp = false;\n        this.removeEventListeners(this.window);\n        this.clearCurrentDragSourceNode();\n        if (this.asyncEndDragFrameId) {\n            this.window.cancelAnimationFrame(this.asyncEndDragFrameId);\n        }\n    };\n    HTML5Backend.prototype.connectDragPreview = function (sourceId, node, options) {\n        var _this = this;\n        this.sourcePreviewNodeOptions.set(sourceId, options);\n        this.sourcePreviewNodes.set(sourceId, node);\n        return function () {\n            _this.sourcePreviewNodes.delete(sourceId);\n            _this.sourcePreviewNodeOptions.delete(sourceId);\n        };\n    };\n    HTML5Backend.prototype.connectDragSource = function (sourceId, node, options) {\n        var _this = this;\n        this.sourceNodes.set(sourceId, node);\n        this.sourceNodeOptions.set(sourceId, options);\n        var handleDragStart = function (e) { return _this.handleDragStart(e, sourceId); };\n        var handleSelectStart = function (e) { return _this.handleSelectStart(e); };\n        node.setAttribute('draggable', true);\n        node.addEventListener('dragstart', handleDragStart);\n        node.addEventListener('selectstart', handleSelectStart);\n        return function () {\n            _this.sourceNodes.delete(sourceId);\n            _this.sourceNodeOptions.delete(sourceId);\n            node.removeEventListener('dragstart', handleDragStart);\n            node.removeEventListener('selectstart', handleSelectStart);\n            node.setAttribute('draggable', false);\n        };\n    };\n    HTML5Backend.prototype.connectDropTarget = function (targetId, node) {\n        var _this = this;\n        var handleDragEnter = function (e) { return _this.handleDragEnter(e, targetId); };\n        var handleDragOver = function (e) { return _this.handleDragOver(e, targetId); };\n        var handleDrop = function (e) { return _this.handleDrop(e, targetId); };\n        node.addEventListener('dragenter', handleDragEnter);\n        node.addEventListener('dragover', handleDragOver);\n        node.addEventListener('drop', handleDrop);\n        return function () {\n            node.removeEventListener('dragenter', handleDragEnter);\n            node.removeEventListener('dragover', handleDragOver);\n            node.removeEventListener('drop', handleDrop);\n        };\n    };\n    HTML5Backend.prototype.addEventListeners = function (target) {\n        // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n        if (!target.addEventListener) {\n            return;\n        }\n        target.addEventListener('dragstart', this.handleTopDragStart);\n        target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n        target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n        target.addEventListener('dragenter', this.handleTopDragEnter);\n        target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n        target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n        target.addEventListener('dragover', this.handleTopDragOver);\n        target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n        target.addEventListener('drop', this.handleTopDrop);\n        target.addEventListener('drop', this.handleTopDropCapture, true);\n    };\n    HTML5Backend.prototype.removeEventListeners = function (target) {\n        // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n        if (!target.removeEventListener) {\n            return;\n        }\n        target.removeEventListener('dragstart', this.handleTopDragStart);\n        target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n        target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n        target.removeEventListener('dragenter', this.handleTopDragEnter);\n        target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n        target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n        target.removeEventListener('dragover', this.handleTopDragOver);\n        target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n        target.removeEventListener('drop', this.handleTopDrop);\n        target.removeEventListener('drop', this.handleTopDropCapture, true);\n    };\n    HTML5Backend.prototype.getCurrentSourceNodeOptions = function () {\n        var sourceId = this.monitor.getSourceId();\n        var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n        return defaults(sourceNodeOptions || {}, {\n            dropEffect: this.altKeyPressed ? 'copy' : 'move',\n        });\n    };\n    HTML5Backend.prototype.getCurrentDropEffect = function () {\n        if (this.isDraggingNativeItem()) {\n            // It makes more sense to default to 'copy' for native resources\n            return 'copy';\n        }\n        return this.getCurrentSourceNodeOptions().dropEffect;\n    };\n    HTML5Backend.prototype.getCurrentSourcePreviewNodeOptions = function () {\n        var sourceId = this.monitor.getSourceId();\n        var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n        return defaults(sourcePreviewNodeOptions || {}, {\n            anchorX: 0.5,\n            anchorY: 0.5,\n            captureDraggingState: false,\n        });\n    };\n    HTML5Backend.prototype.isDraggingNativeItem = function () {\n        var itemType = this.monitor.getItemType();\n        return Object.keys(NativeTypes).some(function (key) { return NativeTypes[key] === itemType; });\n    };\n    HTML5Backend.prototype.beginDragNativeItem = function (type) {\n        this.clearCurrentDragSourceNode();\n        var SourceType = NativeDragSources_1.createNativeDragSource(type);\n        this.currentNativeSource = new SourceType();\n        this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n        this.actions.beginDrag([this.currentNativeHandle]);\n    };\n    HTML5Backend.prototype.setCurrentDragSourceNode = function (node) {\n        var _this = this;\n        this.clearCurrentDragSourceNode();\n        this.currentDragSourceNode = node;\n        // A timeout of > 0 is necessary to resolve Firefox issue referenced\n        // See:\n        //   * https://github.com/react-dnd/react-dnd/pull/928\n        //   * https://github.com/react-dnd/react-dnd/issues/869\n        var MOUSE_MOVE_TIMEOUT = 1000;\n        // Receiving a mouse event in the middle of a dragging operation\n        // means it has ended and the drag source node disappeared from DOM,\n        // so the browser didn't dispatch the dragend event.\n        //\n        // We need to wait before we start listening for mousemove events.\n        // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n        // immediately in some browsers.\n        //\n        // See:\n        //   * https://github.com/react-dnd/react-dnd/pull/928\n        //   * https://github.com/react-dnd/react-dnd/issues/869\n        //\n        this.mouseMoveTimeoutTimer = setTimeout(function () {\n            return (_this.window &&\n                _this.window.addEventListener('mousemove', _this.endDragIfSourceWasRemovedFromDOM, true));\n        }, MOUSE_MOVE_TIMEOUT);\n    };\n    HTML5Backend.prototype.clearCurrentDragSourceNode = function () {\n        if (this.currentDragSourceNode) {\n            this.currentDragSourceNode = null;\n            if (this.window) {\n                this.window.clearTimeout(this.mouseMoveTimeoutTimer);\n                this.window.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n            }\n            this.mouseMoveTimeoutTimer = null;\n            return true;\n        }\n        return false;\n    };\n    HTML5Backend.prototype.handleDragStart = function (e, sourceId) {\n        if (!this.dragStartSourceIds) {\n            this.dragStartSourceIds = [];\n        }\n        this.dragStartSourceIds.unshift(sourceId);\n    };\n    HTML5Backend.prototype.handleDragEnter = function (e, targetId) {\n        this.dragEnterTargetIds.unshift(targetId);\n    };\n    HTML5Backend.prototype.handleDragOver = function (e, targetId) {\n        if (this.dragOverTargetIds === null) {\n            this.dragOverTargetIds = [];\n        }\n        this.dragOverTargetIds.unshift(targetId);\n    };\n    HTML5Backend.prototype.handleDrop = function (e, targetId) {\n        this.dropTargetIds.unshift(targetId);\n    };\n    return HTML5Backend;\n}());\nexports.default = HTML5Backend;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,mBAAmB,GAAGC,OAAO,CAAC,qBAAD,CAAjC;;AACA,IAAIC,iBAAiB,GAAGD,OAAO,CAAC,mBAAD,CAA/B;;AACA,IAAIE,aAAa,GAAGF,OAAO,CAAC,eAAD,CAA3B;;AACA,IAAIG,mBAAmB,GAAGH,OAAO,CAAC,qBAAD,CAAjC;;AACA,IAAII,WAAW,GAAGJ,OAAO,CAAC,eAAD,CAAzB;;AACA,IAAIK,QAAQ,GAAGL,OAAO,CAAC,iBAAD,CAAtB;;AACA,IAAIM,YAAY;AAAG;AAAe,YAAY;EAC1C,SAASA,YAAT,CAAsBC,OAAtB,EAA+B;IAC3B,IAAIC,KAAK,GAAG,IAAZ;;IACA,KAAKC,kBAAL,GAA0B,IAAIC,GAAJ,EAA1B;IACA,KAAKC,wBAAL,GAAgC,IAAID,GAAJ,EAAhC;IACA,KAAKE,WAAL,GAAmB,IAAIF,GAAJ,EAAnB;IACA,KAAKG,iBAAL,GAAyB,IAAIH,GAAJ,EAAzB;IACA,KAAKI,kBAAL,GAA0B,IAA1B;IACA,KAAKC,aAAL,GAAqB,EAArB;IACA,KAAKC,kBAAL,GAA0B,EAA1B;IACA,KAAKC,mBAAL,GAA2B,IAA3B;IACA,KAAKC,mBAAL,GAA2B,IAA3B;IACA,KAAKC,qBAAL,GAA6B,IAA7B;IACA,KAAKC,aAAL,GAAqB,KAArB;IACA,KAAKC,qBAAL,GAA6B,IAA7B;IACA,KAAKC,mBAAL,GAA2B,IAA3B;IACA,KAAKC,iBAAL,GAAyB,IAAzB;;IACA,KAAKC,qBAAL,GAA6B,UAAUC,QAAV,EAAoB;MAC7C,OAAOvB,aAAa,CAACwB,mBAAd,CAAkClB,KAAK,CAACI,WAAN,CAAkBe,GAAlB,CAAsBF,QAAtB,CAAlC,CAAP;IACH,CAFD;;IAGA,KAAKG,iBAAL,GAAyB,YAAY;MACjC,IAAI,CAACpB,KAAK,CAACqB,oBAAN,EAAL,EAAmC;QAC/B;MACH;;MACDrB,KAAK,CAACsB,OAAN,CAAcC,OAAd;;MACAvB,KAAK,CAACwB,QAAN,CAAeC,YAAf,CAA4BzB,KAAK,CAACU,mBAAlC;;MACAV,KAAK,CAACU,mBAAN,GAA4B,IAA5B;MACAV,KAAK,CAACS,mBAAN,GAA4B,IAA5B;IACH,CARD;;IASA,KAAKiB,gBAAL,GAAwB,UAAUC,IAAV,EAAgB;MACpC;MACA,OAAS,CAAC,CAACC,QAAF,IAAcA,QAAQ,CAACC,IAAT,CAAcC,QAAd,CAAuBH,IAAvB,CAAf,IACH,CAAC,CAAC3B,KAAK,CAAC+B,MAAR,IAAkB/B,KAAK,CAAC+B,MAAN,CAAaH,QAAb,CAAsBC,IAAtB,CAA2BC,QAA3B,CAAoCH,IAApC,CADvB;IAEH,CAJD;;IAKA,KAAKK,gCAAL,GAAwC,YAAY;MAChD,IAAIL,IAAI,GAAG3B,KAAK,CAACW,qBAAjB;;MACA,IAAIX,KAAK,CAAC0B,gBAAN,CAAuBC,IAAvB,CAAJ,EAAkC;QAC9B;MACH;;MACD,IAAI3B,KAAK,CAACiC,0BAAN,EAAJ,EAAwC;QACpCjC,KAAK,CAACsB,OAAN,CAAcC,OAAd;MACH;IACJ,CARD;;IASA,KAAKW,yBAAL,GAAiC,YAAY;MACzClC,KAAK,CAACiC,0BAAN;;MACAjC,KAAK,CAACM,kBAAN,GAA2B,EAA3B;IACH,CAHD;;IAIA,KAAK6B,kBAAL,GAA0B,UAAUC,CAAV,EAAa;MACnC,IAAI9B,kBAAkB,GAAGN,KAAK,CAACM,kBAA/B;MACAN,KAAK,CAACM,kBAAN,GAA2B,IAA3B;MACA,IAAI+B,YAAY,GAAG3C,aAAa,CAAC4C,oBAAd,CAAmCF,CAAnC,CAAnB,CAHmC,CAInC;;MACA,IAAIpC,KAAK,CAACuC,OAAN,CAAcC,UAAd,EAAJ,EAAgC;QAC5BxC,KAAK,CAACsB,OAAN,CAAcC,OAAd;MACH,CAPkC,CAQnC;;;MACAvB,KAAK,CAACsB,OAAN,CAAcmB,SAAd,CAAwBnC,kBAAkB,IAAI,EAA9C,EAAkD;QAC9CoC,aAAa,EAAE,KAD+B;QAE9C1B,qBAAqB,EAAEhB,KAAK,CAACgB,qBAFiB;QAG9CqB,YAAY,EAAEA;MAHgC,CAAlD;;MAKA,IAAIM,YAAY,GAAGP,CAAC,CAACO,YAArB;MACA,IAAIC,UAAU,GAAGjD,mBAAmB,CAACkD,mBAApB,CAAwCF,YAAxC,CAAjB;;MACA,IAAI3C,KAAK,CAACuC,OAAN,CAAcC,UAAd,EAAJ,EAAgC;QAC5B,IAAI,OAAOG,YAAY,CAACG,YAApB,KAAqC,UAAzC,EAAqD;UACjD;UACA;UACA;UACA,IAAI7B,QAAQ,GAAGjB,KAAK,CAACuC,OAAN,CAAcQ,WAAd,EAAf;;UACA,IAAIC,UAAU,GAAGhD,KAAK,CAACI,WAAN,CAAkBe,GAAlB,CAAsBF,QAAtB,CAAjB;;UACA,IAAIgC,WAAW,GAAGjD,KAAK,CAACC,kBAAN,CAAyBkB,GAAzB,CAA6BF,QAA7B,KAA0C+B,UAA5D;;UACA,IAAIE,EAAE,GAAGlD,KAAK,CAACmD,kCAAN,EAAT;UAAA,IAAqDC,OAAO,GAAGF,EAAE,CAACE,OAAlE;UAAA,IAA2EC,OAAO,GAAGH,EAAE,CAACG,OAAxF;UAAA,IAAiGC,OAAO,GAAGJ,EAAE,CAACI,OAA9G;UAAA,IAAuHC,OAAO,GAAGL,EAAE,CAACK,OAApI;;UACA,IAAIC,WAAW,GAAG;YAAEJ,OAAO,EAAEA,OAAX;YAAoBC,OAAO,EAAEA;UAA7B,CAAlB;UACA,IAAII,WAAW,GAAG;YAAEH,OAAO,EAAEA,OAAX;YAAoBC,OAAO,EAAEA;UAA7B,CAAlB;UACA,IAAIG,iBAAiB,GAAGhE,aAAa,CAACiE,oBAAd,CAAmCX,UAAnC,EAA+CC,WAA/C,EAA4DZ,YAA5D,EAA0EmB,WAA1E,EAAuFC,WAAvF,CAAxB;UACAd,YAAY,CAACG,YAAb,CAA0BG,WAA1B,EAAuCS,iBAAiB,CAACE,CAAzD,EAA4DF,iBAAiB,CAACG,CAA9E;QACH;;QACD,IAAI;UACA;UACAlB,YAAY,CAACmB,OAAb,CAAqB,kBAArB,EAAyC,EAAzC;QACH,CAHD,CAIA,OAAOC,GAAP,EAAY,CACR;QACH,CApB2B,CAqB5B;QACA;;;QACA/D,KAAK,CAACgE,wBAAN,CAA+B5B,CAAC,CAAC6B,MAAjC,EAvB4B,CAwB5B;;;QACA,IAAIC,oBAAoB,GAAGlE,KAAK,CAACmD,kCAAN,GAA2Ce,oBAAtE;;QACA,IAAI,CAACA,oBAAL,EAA2B;UACvB;UACA;UACA;UACA;UACA;UACAC,UAAU,CAAC,YAAY;YAAE,OAAOnE,KAAK,CAACsB,OAAN,CAAc8C,iBAAd,EAAP;UAA2C,CAA1D,EAA4D,CAA5D,CAAV;QACH,CAPD,MAQK;UACD;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACApE,KAAK,CAACsB,OAAN,CAAc8C,iBAAd;QACH;MACJ,CA/CD,MAgDK,IAAIxB,UAAJ,EAAgB;QACjB;QACA5C,KAAK,CAACqE,mBAAN,CAA0BzB,UAA1B;MACH,CAHI,MAIA,IAAI,CAACD,YAAY,CAAC2B,KAAd,KACJ,CAAClC,CAAC,CAAC6B,MAAF,CAASM,YAAV,IAA0B,CAACnC,CAAC,CAAC6B,MAAF,CAASM,YAAT,CAAsB,WAAtB,CADvB,CAAJ,EACgE;QACjE;QACA;QACA;QACA;MACH,CANI,MAOA;QACD;QACAnC,CAAC,CAACoC,cAAF;MACH;IACJ,CA/ED;;IAgFA,KAAKC,uBAAL,GAA+B,YAAY;MACvC,IAAIzE,KAAK,CAACiC,0BAAN,EAAJ,EAAwC;QACpC;QACA;QACA;QACAjC,KAAK,CAACsB,OAAN,CAAcC,OAAd;MACH;IACJ,CAPD;;IAQA,KAAKmD,yBAAL,GAAiC,UAAUtC,CAAV,EAAa;MAC1CpC,KAAK,CAACQ,kBAAN,GAA2B,EAA3B;;MACA,IAAImE,YAAY,GAAG3E,KAAK,CAAC4E,iBAAN,CAAwBC,KAAxB,CAA8BzC,CAAC,CAAC6B,MAAhC,CAAnB;;MACA,IAAI,CAACU,YAAD,IAAiB3E,KAAK,CAACuC,OAAN,CAAcC,UAAd,EAArB,EAAiD;QAC7C;MACH;;MACD,IAAIG,YAAY,GAAGP,CAAC,CAACO,YAArB;MACA,IAAIC,UAAU,GAAGjD,mBAAmB,CAACkD,mBAApB,CAAwCF,YAAxC,CAAjB;;MACA,IAAIC,UAAJ,EAAgB;QACZ;QACA5C,KAAK,CAACqE,mBAAN,CAA0BzB,UAA1B;MACH;IACJ,CAZD;;IAaA,KAAKkC,kBAAL,GAA0B,UAAU1C,CAAV,EAAa;MACnC,IAAI5B,kBAAkB,GAAGR,KAAK,CAACQ,kBAA/B;MACAR,KAAK,CAACQ,kBAAN,GAA2B,EAA3B;;MACA,IAAI,CAACR,KAAK,CAACuC,OAAN,CAAcC,UAAd,EAAL,EAAiC;QAC7B;QACA;MACH;;MACDxC,KAAK,CAACY,aAAN,GAAsBwB,CAAC,CAAC2C,MAAxB;;MACA,IAAI,CAACtF,iBAAiB,CAACuF,SAAlB,EAAL,EAAoC;QAChC;QACA;QACA;QACA;QACAhF,KAAK,CAACsB,OAAN,CAAc2D,KAAd,CAAoBzE,kBAApB,EAAwC;UACpC6B,YAAY,EAAE3C,aAAa,CAAC4C,oBAAd,CAAmCF,CAAnC;QADsB,CAAxC;MAGH;;MACD,IAAI8C,OAAO,GAAG1E,kBAAkB,CAAC2E,IAAnB,CAAwB,UAAUC,QAAV,EAAoB;QACtD,OAAOpF,KAAK,CAACuC,OAAN,CAAc8C,eAAd,CAA8BD,QAA9B,CAAP;MACH,CAFa,CAAd;;MAGA,IAAIF,OAAJ,EAAa;QACT;QACA9C,CAAC,CAACoC,cAAF;QACApC,CAAC,CAACO,YAAF,CAAe2C,UAAf,GAA4BtF,KAAK,CAACuF,oBAAN,EAA5B;MACH;IACJ,CAzBD;;IA0BA,KAAKC,wBAAL,GAAgC,YAAY;MACxCxF,KAAK,CAACe,iBAAN,GAA0B,EAA1B;IACH,CAFD;;IAGA,KAAK0E,iBAAL,GAAyB,UAAUrD,CAAV,EAAa;MAClC,IAAIrB,iBAAiB,GAAGf,KAAK,CAACe,iBAA9B;MACAf,KAAK,CAACe,iBAAN,GAA0B,EAA1B;;MACA,IAAI,CAACf,KAAK,CAACuC,OAAN,CAAcC,UAAd,EAAL,EAAiC;QAC7B;QACA;QACAJ,CAAC,CAACoC,cAAF;QACApC,CAAC,CAACO,YAAF,CAAe2C,UAAf,GAA4B,MAA5B;QACA;MACH;;MACDtF,KAAK,CAACY,aAAN,GAAsBwB,CAAC,CAAC2C,MAAxB;;MACA/E,KAAK,CAACsB,OAAN,CAAc2D,KAAd,CAAoBlE,iBAAiB,IAAI,EAAzC,EAA6C;QACzCsB,YAAY,EAAE3C,aAAa,CAAC4C,oBAAd,CAAmCF,CAAnC;MAD2B,CAA7C;;MAGA,IAAI8C,OAAO,GAAG,CAACnE,iBAAiB,IAAI,EAAtB,EAA0BoE,IAA1B,CAA+B,UAAUC,QAAV,EAAoB;QAC7D,OAAOpF,KAAK,CAACuC,OAAN,CAAc8C,eAAd,CAA8BD,QAA9B,CAAP;MACH,CAFa,CAAd;;MAGA,IAAIF,OAAJ,EAAa;QACT;QACA9C,CAAC,CAACoC,cAAF;QACApC,CAAC,CAACO,YAAF,CAAe2C,UAAf,GAA4BtF,KAAK,CAACuF,oBAAN,EAA5B;MACH,CAJD,MAKK,IAAIvF,KAAK,CAACqB,oBAAN,EAAJ,EAAkC;QACnC;QACA;QACAe,CAAC,CAACoC,cAAF;QACApC,CAAC,CAACO,YAAF,CAAe2C,UAAf,GAA4B,MAA5B;MACH,CALI,MAMA;QACDlD,CAAC,CAACoC,cAAF;QACApC,CAAC,CAACO,YAAF,CAAe2C,UAAf,GAA4B,MAA5B;MACH;IACJ,CAhCD;;IAiCA,KAAKI,yBAAL,GAAiC,UAAUtD,CAAV,EAAa;MAC1C,IAAIpC,KAAK,CAACqB,oBAAN,EAAJ,EAAkC;QAC9Be,CAAC,CAACoC,cAAF;MACH;;MACD,IAAImB,WAAW,GAAG3F,KAAK,CAAC4E,iBAAN,CAAwBgB,KAAxB,CAA8BxD,CAAC,CAAC6B,MAAhC,CAAlB;;MACA,IAAI,CAAC0B,WAAL,EAAkB;QACd;MACH;;MACD,IAAI3F,KAAK,CAACqB,oBAAN,EAAJ,EAAkC;QAC9BrB,KAAK,CAACoB,iBAAN;MACH;IACJ,CAXD;;IAYA,KAAKyE,oBAAL,GAA4B,UAAUzD,CAAV,EAAa;MACrCpC,KAAK,CAACO,aAAN,GAAsB,EAAtB;MACA6B,CAAC,CAACoC,cAAF;;MACA,IAAIxE,KAAK,CAACqB,oBAAN,EAAJ,EAAkC;QAC9BrB,KAAK,CAACS,mBAAN,CAA0BqF,+BAA1B,CAA0D1D,CAAC,CAACO,YAA5D;MACH;;MACD3C,KAAK,CAAC4E,iBAAN,CAAwBmB,KAAxB;IACH,CAPD;;IAQA,KAAKC,aAAL,GAAqB,UAAU5D,CAAV,EAAa;MAC9B,IAAI7B,aAAa,GAAGP,KAAK,CAACO,aAA1B;MACAP,KAAK,CAACO,aAAN,GAAsB,EAAtB;;MACAP,KAAK,CAACsB,OAAN,CAAc2D,KAAd,CAAoB1E,aAApB,EAAmC;QAC/B8B,YAAY,EAAE3C,aAAa,CAAC4C,oBAAd,CAAmCF,CAAnC;MADiB,CAAnC;;MAGApC,KAAK,CAACsB,OAAN,CAAc2E,IAAd,CAAmB;QAAEX,UAAU,EAAEtF,KAAK,CAACuF,oBAAN;MAAd,CAAnB;;MACA,IAAIvF,KAAK,CAACqB,oBAAN,EAAJ,EAAkC;QAC9BrB,KAAK,CAACoB,iBAAN;MACH,CAFD,MAGK;QACDpB,KAAK,CAACgC,gCAAN;MACH;IACJ,CAbD;;IAcA,KAAKkE,iBAAL,GAAyB,UAAU9D,CAAV,EAAa;MAClC,IAAI6B,MAAM,GAAG7B,CAAC,CAAC6B,MAAf,CADkC,CAElC;MACA;;MACA,IAAI,OAAOA,MAAM,CAACkC,QAAd,KAA2B,UAA/B,EAA2C;QACvC;MACH,CANiC,CAOlC;;;MACA,IAAIlC,MAAM,CAACmC,OAAP,KAAmB,OAAnB,IACAnC,MAAM,CAACmC,OAAP,KAAmB,QADnB,IAEAnC,MAAM,CAACmC,OAAP,KAAmB,UAFnB,IAGAnC,MAAM,CAACoC,iBAHX,EAG8B;QAC1B;MACH,CAbiC,CAclC;MACA;;;MACAjE,CAAC,CAACoC,cAAF;MACAP,MAAM,CAACkC,QAAP;IACH,CAlBD;;IAmBA,KAAK7E,OAAL,GAAevB,OAAO,CAACuG,UAAR,EAAf;IACA,KAAK/D,OAAL,GAAexC,OAAO,CAACwG,UAAR,EAAf;IACA,KAAK/E,QAAL,GAAgBzB,OAAO,CAACyG,WAAR,EAAhB;IACA,KAAKC,OAAL,GAAe1G,OAAO,CAAC2G,UAAR,EAAf;IACA,KAAK9B,iBAAL,GAAyB,IAAIrF,mBAAmB,CAACoH,OAAxB,CAAgC,KAAKjF,gBAArC,CAAzB;EACH;;EACDvC,MAAM,CAACC,cAAP,CAAsBU,YAAY,CAAC8G,SAAnC,EAA8C,QAA9C,EAAwD;IACpD;IACAzF,GAAG,EAAE,eAAY;MACb,IAAI,KAAKsF,OAAL,IAAgB,KAAKA,OAAL,CAAa1E,MAAjC,EAAyC;QACrC,OAAO,KAAK0E,OAAL,CAAa1E,MAApB;MACH,CAFD,MAGK,IAAI,OAAOA,MAAP,KAAkB,WAAtB,EAAmC;QACpC,OAAOA,MAAP;MACH;;MACD,OAAO8E,SAAP;IACH,CAVmD;IAWpDC,UAAU,EAAE,IAXwC;IAYpDC,YAAY,EAAE;EAZsC,CAAxD;;EAcAjH,YAAY,CAAC8G,SAAb,CAAuBI,KAAvB,GAA+B,YAAY;IACvC,IAAI,KAAKjF,MAAL,KAAgB8E,SAApB,EAA+B;MAC3B;IACH;;IACD,IAAI,KAAK9E,MAAL,CAAYkF,wBAAhB,EAA0C;MACtC,MAAM,IAAIC,KAAJ,CAAU,kDAAV,CAAN;IACH;;IACD,KAAKnF,MAAL,CAAYkF,wBAAZ,GAAuC,IAAvC;IACA,KAAKE,iBAAL,CAAuB,KAAKpF,MAA5B;EACH,CATD;;EAUAjC,YAAY,CAAC8G,SAAb,CAAuBQ,QAAvB,GAAkC,YAAY;IAC1C,IAAI,KAAKrF,MAAL,KAAgB8E,SAApB,EAA+B;MAC3B;IACH;;IACD,KAAK9E,MAAL,CAAYkF,wBAAZ,GAAuC,KAAvC;IACA,KAAKI,oBAAL,CAA0B,KAAKtF,MAA/B;IACA,KAAKE,0BAAL;;IACA,IAAI,KAAKnB,mBAAT,EAA8B;MAC1B,KAAKiB,MAAL,CAAYuF,oBAAZ,CAAiC,KAAKxG,mBAAtC;IACH;EACJ,CAVD;;EAWAhB,YAAY,CAAC8G,SAAb,CAAuBW,kBAAvB,GAA4C,UAAUtG,QAAV,EAAoBU,IAApB,EAA0B6F,OAA1B,EAAmC;IAC3E,IAAIxH,KAAK,GAAG,IAAZ;;IACA,KAAKG,wBAAL,CAA8BsH,GAA9B,CAAkCxG,QAAlC,EAA4CuG,OAA5C;IACA,KAAKvH,kBAAL,CAAwBwH,GAAxB,CAA4BxG,QAA5B,EAAsCU,IAAtC;IACA,OAAO,YAAY;MACf3B,KAAK,CAACC,kBAAN,CAAyByH,MAAzB,CAAgCzG,QAAhC;;MACAjB,KAAK,CAACG,wBAAN,CAA+BuH,MAA/B,CAAsCzG,QAAtC;IACH,CAHD;EAIH,CARD;;EASAnB,YAAY,CAAC8G,SAAb,CAAuBe,iBAAvB,GAA2C,UAAU1G,QAAV,EAAoBU,IAApB,EAA0B6F,OAA1B,EAAmC;IAC1E,IAAIxH,KAAK,GAAG,IAAZ;;IACA,KAAKI,WAAL,CAAiBqH,GAAjB,CAAqBxG,QAArB,EAA+BU,IAA/B;IACA,KAAKtB,iBAAL,CAAuBoH,GAAvB,CAA2BxG,QAA3B,EAAqCuG,OAArC;;IACA,IAAII,eAAe,GAAG,SAAlBA,eAAkB,CAAUxF,CAAV,EAAa;MAAE,OAAOpC,KAAK,CAAC4H,eAAN,CAAsBxF,CAAtB,EAAyBnB,QAAzB,CAAP;IAA4C,CAAjF;;IACA,IAAIiF,iBAAiB,GAAG,SAApBA,iBAAoB,CAAU9D,CAAV,EAAa;MAAE,OAAOpC,KAAK,CAACkG,iBAAN,CAAwB9D,CAAxB,CAAP;IAAoC,CAA3E;;IACAT,IAAI,CAACkG,YAAL,CAAkB,WAAlB,EAA+B,IAA/B;IACAlG,IAAI,CAACmG,gBAAL,CAAsB,WAAtB,EAAmCF,eAAnC;IACAjG,IAAI,CAACmG,gBAAL,CAAsB,aAAtB,EAAqC5B,iBAArC;IACA,OAAO,YAAY;MACflG,KAAK,CAACI,WAAN,CAAkBsH,MAAlB,CAAyBzG,QAAzB;;MACAjB,KAAK,CAACK,iBAAN,CAAwBqH,MAAxB,CAA+BzG,QAA/B;;MACAU,IAAI,CAACoG,mBAAL,CAAyB,WAAzB,EAAsCH,eAAtC;MACAjG,IAAI,CAACoG,mBAAL,CAAyB,aAAzB,EAAwC7B,iBAAxC;MACAvE,IAAI,CAACkG,YAAL,CAAkB,WAAlB,EAA+B,KAA/B;IACH,CAND;EAOH,CAhBD;;EAiBA/H,YAAY,CAAC8G,SAAb,CAAuBoB,iBAAvB,GAA2C,UAAU5C,QAAV,EAAoBzD,IAApB,EAA0B;IACjE,IAAI3B,KAAK,GAAG,IAAZ;;IACA,IAAIiI,eAAe,GAAG,SAAlBA,eAAkB,CAAU7F,CAAV,EAAa;MAAE,OAAOpC,KAAK,CAACiI,eAAN,CAAsB7F,CAAtB,EAAyBgD,QAAzB,CAAP;IAA4C,CAAjF;;IACA,IAAI8C,cAAc,GAAG,SAAjBA,cAAiB,CAAU9F,CAAV,EAAa;MAAE,OAAOpC,KAAK,CAACkI,cAAN,CAAqB9F,CAArB,EAAwBgD,QAAxB,CAAP;IAA2C,CAA/E;;IACA,IAAI+C,UAAU,GAAG,SAAbA,UAAa,CAAU/F,CAAV,EAAa;MAAE,OAAOpC,KAAK,CAACmI,UAAN,CAAiB/F,CAAjB,EAAoBgD,QAApB,CAAP;IAAuC,CAAvE;;IACAzD,IAAI,CAACmG,gBAAL,CAAsB,WAAtB,EAAmCG,eAAnC;IACAtG,IAAI,CAACmG,gBAAL,CAAsB,UAAtB,EAAkCI,cAAlC;IACAvG,IAAI,CAACmG,gBAAL,CAAsB,MAAtB,EAA8BK,UAA9B;IACA,OAAO,YAAY;MACfxG,IAAI,CAACoG,mBAAL,CAAyB,WAAzB,EAAsCE,eAAtC;MACAtG,IAAI,CAACoG,mBAAL,CAAyB,UAAzB,EAAqCG,cAArC;MACAvG,IAAI,CAACoG,mBAAL,CAAyB,MAAzB,EAAiCI,UAAjC;IACH,CAJD;EAKH,CAbD;;EAcArI,YAAY,CAAC8G,SAAb,CAAuBO,iBAAvB,GAA2C,UAAUlD,MAAV,EAAkB;IACzD;IACA,IAAI,CAACA,MAAM,CAAC6D,gBAAZ,EAA8B;MAC1B;IACH;;IACD7D,MAAM,CAAC6D,gBAAP,CAAwB,WAAxB,EAAqC,KAAK3F,kBAA1C;IACA8B,MAAM,CAAC6D,gBAAP,CAAwB,WAAxB,EAAqC,KAAK5F,yBAA1C,EAAqE,IAArE;IACA+B,MAAM,CAAC6D,gBAAP,CAAwB,SAAxB,EAAmC,KAAKrD,uBAAxC,EAAiE,IAAjE;IACAR,MAAM,CAAC6D,gBAAP,CAAwB,WAAxB,EAAqC,KAAKhD,kBAA1C;IACAb,MAAM,CAAC6D,gBAAP,CAAwB,WAAxB,EAAqC,KAAKpD,yBAA1C,EAAqE,IAArE;IACAT,MAAM,CAAC6D,gBAAP,CAAwB,WAAxB,EAAqC,KAAKpC,yBAA1C,EAAqE,IAArE;IACAzB,MAAM,CAAC6D,gBAAP,CAAwB,UAAxB,EAAoC,KAAKrC,iBAAzC;IACAxB,MAAM,CAAC6D,gBAAP,CAAwB,UAAxB,EAAoC,KAAKtC,wBAAzC,EAAmE,IAAnE;IACAvB,MAAM,CAAC6D,gBAAP,CAAwB,MAAxB,EAAgC,KAAK9B,aAArC;IACA/B,MAAM,CAAC6D,gBAAP,CAAwB,MAAxB,EAAgC,KAAKjC,oBAArC,EAA2D,IAA3D;EACH,CAfD;;EAgBA/F,YAAY,CAAC8G,SAAb,CAAuBS,oBAAvB,GAA8C,UAAUpD,MAAV,EAAkB;IAC5D;IACA,IAAI,CAACA,MAAM,CAAC8D,mBAAZ,EAAiC;MAC7B;IACH;;IACD9D,MAAM,CAAC8D,mBAAP,CAA2B,WAA3B,EAAwC,KAAK5F,kBAA7C;IACA8B,MAAM,CAAC8D,mBAAP,CAA2B,WAA3B,EAAwC,KAAK7F,yBAA7C,EAAwE,IAAxE;IACA+B,MAAM,CAAC8D,mBAAP,CAA2B,SAA3B,EAAsC,KAAKtD,uBAA3C,EAAoE,IAApE;IACAR,MAAM,CAAC8D,mBAAP,CAA2B,WAA3B,EAAwC,KAAKjD,kBAA7C;IACAb,MAAM,CAAC8D,mBAAP,CAA2B,WAA3B,EAAwC,KAAKrD,yBAA7C,EAAwE,IAAxE;IACAT,MAAM,CAAC8D,mBAAP,CAA2B,WAA3B,EAAwC,KAAKrC,yBAA7C,EAAwE,IAAxE;IACAzB,MAAM,CAAC8D,mBAAP,CAA2B,UAA3B,EAAuC,KAAKtC,iBAA5C;IACAxB,MAAM,CAAC8D,mBAAP,CAA2B,UAA3B,EAAuC,KAAKvC,wBAA5C,EAAsE,IAAtE;IACAvB,MAAM,CAAC8D,mBAAP,CAA2B,MAA3B,EAAmC,KAAK/B,aAAxC;IACA/B,MAAM,CAAC8D,mBAAP,CAA2B,MAA3B,EAAmC,KAAKlC,oBAAxC,EAA8D,IAA9D;EACH,CAfD;;EAgBA/F,YAAY,CAAC8G,SAAb,CAAuBwB,2BAAvB,GAAqD,YAAY;IAC7D,IAAInH,QAAQ,GAAG,KAAKsB,OAAL,CAAaQ,WAAb,EAAf;IACA,IAAI1C,iBAAiB,GAAG,KAAKA,iBAAL,CAAuBc,GAAvB,CAA2BF,QAA3B,CAAxB;IACA,OAAOpB,QAAQ,CAACQ,iBAAiB,IAAI,EAAtB,EAA0B;MACrCiF,UAAU,EAAE,KAAK1E,aAAL,GAAqB,MAArB,GAA8B;IADL,CAA1B,CAAf;EAGH,CAND;;EAOAd,YAAY,CAAC8G,SAAb,CAAuBrB,oBAAvB,GAA8C,YAAY;IACtD,IAAI,KAAKlE,oBAAL,EAAJ,EAAiC;MAC7B;MACA,OAAO,MAAP;IACH;;IACD,OAAO,KAAK+G,2BAAL,GAAmC9C,UAA1C;EACH,CAND;;EAOAxF,YAAY,CAAC8G,SAAb,CAAuBzD,kCAAvB,GAA4D,YAAY;IACpE,IAAIlC,QAAQ,GAAG,KAAKsB,OAAL,CAAaQ,WAAb,EAAf;IACA,IAAI5C,wBAAwB,GAAG,KAAKA,wBAAL,CAA8BgB,GAA9B,CAAkCF,QAAlC,CAA/B;IACA,OAAOpB,QAAQ,CAACM,wBAAwB,IAAI,EAA7B,EAAiC;MAC5CiD,OAAO,EAAE,GADmC;MAE5CC,OAAO,EAAE,GAFmC;MAG5Ca,oBAAoB,EAAE;IAHsB,CAAjC,CAAf;EAKH,CARD;;EASApE,YAAY,CAAC8G,SAAb,CAAuBvF,oBAAvB,GAA8C,YAAY;IACtD,IAAIgH,QAAQ,GAAG,KAAK9F,OAAL,CAAa+F,WAAb,EAAf;IACA,OAAOnJ,MAAM,CAACoJ,IAAP,CAAY3I,WAAZ,EAAyBuF,IAAzB,CAA8B,UAAUqD,GAAV,EAAe;MAAE,OAAO5I,WAAW,CAAC4I,GAAD,CAAX,KAAqBH,QAA5B;IAAuC,CAAtF,CAAP;EACH,CAHD;;EAIAvI,YAAY,CAAC8G,SAAb,CAAuBvC,mBAAvB,GAA6C,UAAUoE,IAAV,EAAgB;IACzD,KAAKxG,0BAAL;IACA,IAAIyG,UAAU,GAAG/I,mBAAmB,CAACgJ,sBAApB,CAA2CF,IAA3C,CAAjB;IACA,KAAKhI,mBAAL,GAA2B,IAAIiI,UAAJ,EAA3B;IACA,KAAKhI,mBAAL,GAA2B,KAAKc,QAAL,CAAcoH,SAAd,CAAwBH,IAAxB,EAA8B,KAAKhI,mBAAnC,CAA3B;IACA,KAAKa,OAAL,CAAamB,SAAb,CAAuB,CAAC,KAAK/B,mBAAN,CAAvB;EACH,CAND;;EAOAZ,YAAY,CAAC8G,SAAb,CAAuB5C,wBAAvB,GAAkD,UAAUrC,IAAV,EAAgB;IAC9D,IAAI3B,KAAK,GAAG,IAAZ;;IACA,KAAKiC,0BAAL;IACA,KAAKtB,qBAAL,GAA6BgB,IAA7B,CAH8D,CAI9D;IACA;IACA;IACA;;IACA,IAAIkH,kBAAkB,GAAG,IAAzB,CAR8D,CAS9D;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IACA,KAAKhI,qBAAL,GAA6BsD,UAAU,CAAC,YAAY;MAChD,OAAQnE,KAAK,CAAC+B,MAAN,IACJ/B,KAAK,CAAC+B,MAAN,CAAa+F,gBAAb,CAA8B,WAA9B,EAA2C9H,KAAK,CAACgC,gCAAjD,EAAmF,IAAnF,CADJ;IAEH,CAHsC,EAGpC6G,kBAHoC,CAAvC;EAIH,CAzBD;;EA0BA/I,YAAY,CAAC8G,SAAb,CAAuB3E,0BAAvB,GAAoD,YAAY;IAC5D,IAAI,KAAKtB,qBAAT,EAAgC;MAC5B,KAAKA,qBAAL,GAA6B,IAA7B;;MACA,IAAI,KAAKoB,MAAT,EAAiB;QACb,KAAKA,MAAL,CAAY+G,YAAZ,CAAyB,KAAKjI,qBAA9B;QACA,KAAKkB,MAAL,CAAYgG,mBAAZ,CAAgC,WAAhC,EAA6C,KAAK/F,gCAAlD,EAAoF,IAApF;MACH;;MACD,KAAKnB,qBAAL,GAA6B,IAA7B;MACA,OAAO,IAAP;IACH;;IACD,OAAO,KAAP;EACH,CAXD;;EAYAf,YAAY,CAAC8G,SAAb,CAAuBgB,eAAvB,GAAyC,UAAUxF,CAAV,EAAanB,QAAb,EAAuB;IAC5D,IAAI,CAAC,KAAKX,kBAAV,EAA8B;MAC1B,KAAKA,kBAAL,GAA0B,EAA1B;IACH;;IACD,KAAKA,kBAAL,CAAwByI,OAAxB,CAAgC9H,QAAhC;EACH,CALD;;EAMAnB,YAAY,CAAC8G,SAAb,CAAuBqB,eAAvB,GAAyC,UAAU7F,CAAV,EAAagD,QAAb,EAAuB;IAC5D,KAAK5E,kBAAL,CAAwBuI,OAAxB,CAAgC3D,QAAhC;EACH,CAFD;;EAGAtF,YAAY,CAAC8G,SAAb,CAAuBsB,cAAvB,GAAwC,UAAU9F,CAAV,EAAagD,QAAb,EAAuB;IAC3D,IAAI,KAAKrE,iBAAL,KAA2B,IAA/B,EAAqC;MACjC,KAAKA,iBAAL,GAAyB,EAAzB;IACH;;IACD,KAAKA,iBAAL,CAAuBgI,OAAvB,CAA+B3D,QAA/B;EACH,CALD;;EAMAtF,YAAY,CAAC8G,SAAb,CAAuBuB,UAAvB,GAAoC,UAAU/F,CAAV,EAAagD,QAAb,EAAuB;IACvD,KAAK7E,aAAL,CAAmBwI,OAAnB,CAA2B3D,QAA3B;EACH,CAFD;;EAGA,OAAOtF,YAAP;AACH,CAndiC,EAAlC;;AAodAT,OAAO,CAACsH,OAAR,GAAkB7G,YAAlB"},"metadata":{},"sourceType":"script"}